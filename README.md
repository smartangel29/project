# project
# Generated by Django 2.1 on 2020-02-08 13:16

from django.db import migrations, models

class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Information',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('username', models.CharField(max_length=30)),
                ('email', models.CharField(max_length=30)),
                ('city', models.CharField(max_length=30)),
                ('state', models.CharField(max_length=30)),
                ('age', models.CharField(max_length=30)),
                ('address1', models.CharField(max_length=30)),
                ('address2', models.CharField(max_length=30)),
                ('post', models.CharField(max_length=30)),
                ('result', models.CharField(default='', max_length=30)),
            ],
        ),
    ]



# Generated by Django 2.1 on 2020-02-08 14:01

from django.db import migrations, models

class Migration(migrations.Migration):

    dependencies = [
        ('vision', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='Information1',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('username', models.CharField(max_length=30)),
                ('email', models.CharField(max_length=30)),
                ('gender', models.CharField(max_length=30)),
                ('phone', models.CharField(max_length=30)),
                ('age', models.CharField(max_length=30)),
                ('address', models.CharField(max_length=70)),
                ('test', models.CharField(max_length=30)),
                ('pid', models.CharField(max_length=30)),
                ('result', models.CharField(default='', max_length=30)),
            ],
        ),
        migrations.DeleteModel(
            name='Information',
        ),
    ]



# Generated by Django 2.1 on 2020-02-08 14:02

from django.db import migrations

class Migration(migrations.Migration):

    dependencies = [
        ('vision', '0002_auto_20200208_1401'),
    ]

    operations = [
        migrations.RenameModel(
            old_name='Information1',
            new_name='Information',
        ),
    ]



{% extends "index.html" %}
{% load static %}
{% block body %}
<div class="contained"><table class="table table-lite">

</table></div>

{% endblock %}


<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../../../favicon.ico">
  {% load static %}
    <title>Plant Disease Prediction</title>

    <!-- Bootstrap core CSS -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="{% static 'dashboard.css' %}" rel="stylesheet">
  </head>

  <body>
    <nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0">
      <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">Plant Disease Prediction</a>
      
      <ul class="navbar-nav px-3">
        <li class="nav-item text-nowrap">
          <a class="nav-link" href="#">Disconnect</a>
        </li>
      </ul>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <nav class="col-md-4 d-none d-md-block bg-light sidebar">
          <div class="sidebar-sticky shadow">
            <ul class="nav flex-column">
              
              <li class="nav-item">
                <a class="nav-link" href="entry">
                  <span data-feather="file"></span>
                  New Plant
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="upload">
                  <span data-feather="file"></span>
                  Quick Test
                </a>
              </li>
             
              <li class="nav-item">
                <a class="nav-link" href="disease">
                  <span data-feather="users"></span>
                  
                </a>
              </li>
              
              
            </ul>

           
            
          </div>
        </nav>

        <main role="main" class="col-md-8 ml-sm-auto col-lg-8 pt-3 px-4">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
            <h1 class="h2">Results</h1></div>
            {% block body %}
            <div class="btn-toolbar mb-2 mb-md-0">

              <div class="btn-group mr-2">
                <button class="btn btn-sm btn-outline-secondary">Share</button>
                <button class="btn btn-sm btn-outline-secondary">Export</button>
              </div>
              <button class="btn btn-sm btn-outline-secondary dropdown-toggle">
                <span data-feather="calendar"></span>
                This week
              </button>

          </div>

          <!--canvas class="my-4" id="myChart" width="900" height="380"></canvas>-->

          
          <div class="table-responsive">
            
          </div>
          {% endblock %}
        </main>
      </div>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="../../../../assets/js/vendor/popper.min.js"></script>
    <script src="../../../../dist/js/bootstrap.min.js"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
    <script>
      feather.replace()
    </script>

    <!-- Graphs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
    <script>
      var ctx = document.getElementById("myChart");
      var myChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
          datasets: [{
            data: [15339, 21345, 18483, 24003, 23489, 24092, 12034],
            lineTension: 0,
            backgroundColor: 'transparent',
            borderColor: '#007bff',
            borderWidth: 4,
            pointBackgroundColor: '#007bff'
          }]
        },
        options: {
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero: false
              }
            }]
          },
          legend: {
            display: false,
          }
        }
      });
    </script>

  </body>
</html>



<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../../../favicon.ico">
  {% load static %}
    <title>EYE Vision</title>

    <!-- Bootstrap core CSS -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="{% static 'dashboard.css' %}" rel="stylesheet">
  </head>

  <body>
    <nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0">
      <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">DIAIRIS</a>
      
      <ul class="navbar-nav px-3">
        <li class="nav-item text-nowrap">
          <a class="nav-link" href="#">Disconnect</a>
        </li>
      </ul>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <nav class="col-md-4 d-none d-md-block bg-light sidebar">
          <div class="sidebar-sticky">
            <ul class="nav flex-column">
              <li class="nav-item">
                <a class="nav-link" href="entry">
                  <span data-feather="file"></span>
                   New Patient
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="upload">
                  <span data-feather="file"></span>
                  Diabetes Test
                </a>
              </li>
            
              <li class="nav-item">
                <a class="nav-link" href="disease">
                  <span data-feather="users"></span>
                  Disease
                </a>
              </li>
            </ul>
          </div>
        </nav>

        <main role="main" class="col-md-8 ml-sm-auto col-lg-8 pt-3 px-4">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
            <h1 class="h2">New Patient</h1></div>
            {% block body %}
            <form method="post">{% csrf_token %}
    <div class="form-row">
    <div class="form-group col-md-6">
      <label for="inputEmail4">Name</label>
      <input type="text" class="form-control" id="username" placeholder="Patient Name" name="username" required>
    </div>
    <div class="form-group col-md-6">
      <label for="inputPassword4">Age</label>
      <input type="text" class="form-control" id="number" placeholder="Age" name="age" required>
    </div>
  </div>
<div class="form-row">
              <div class="form-group">
    <label for="inputAddress">Gender</label>
    <input type="text" class="form-control" id="gender" placeholder="Male/Female" name="gender" required>
  </div>
              <div class="form-group col-md-6">
      <label for="inputPassword4">ID</label>
      <input type="text" class="form-control" id="patient_number" placeholder="A001" name="id">
    </div>
</div>

              <div class="form-group">
    <label for="phone">Phone Number</label>
    <input type="text" class="form-control" id="phone" placeholder="987654321" name="phone">
  </div>
                <div class="form-row">
    <div class="form-group col-md-6">
      <label for="inputEmail4">Email</label>
      <input type="email" name = email class="form-control" id="inputEmail4" placeholder="Email">
    </div>
  </div>

  <div class="form-row">
    <div class="form-group col-md-6">
      <label for="inputCity">Address</label>
      <input type="text" class="form-control" id="inputCity" name = "address">
    </div>
    <div class="form-group col-md-4">
      <label for="inputState">Test</label>
      <select id="inputState" class="form-control" name="test">
        <option selected>Choose...</option>
        <option>Diabeties</option>
        <option>Thyroid</option>
        <option>Both</option>

      </select>
    </div>

  </div>
  <div class="form-group">

  </div>
  <button type="submit" class="btn btn-primary">Registration</button>

            </form>
          {% endblock %}
        </main>
      </div>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="../../../../assets/js/vendor/popper.min.js"></script>
    <script src="../../../../dist/js/bootstrap.min.js"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
    <script>
      feather.replace()
    </script>

    <!-- Graphs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
    <script>
      var ctx = document.getElementById("myChart");
      var myChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
          datasets: [{
            data: [15339, 21345, 18483, 24003, 23489, 24092, 12034],
            lineTension: 0,
            backgroundColor: 'transparent',
            borderColor: '#007bff',
            borderWidth: 4,
            pointBackgroundColor: '#007bff'
          }]
        },
        options: {
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero: false
              }
            }]
          },
          legend: {
            display: false,
          }
        }
      });
    </script>

  </body>
</html>



{% extends "index.html" %}
{% load static %}
{% block body %}
 <center>
<form action="upload" method="post" enctype="multipart/form-data">{% csrf_token %}

    <input type="file" name="file" id="fileToUpload" class="btn btn-primary">
    <input type="submit" value="Upload Image" name="submit" class="btn btn-primary"><br><br>
</form>
{% if image %}
<img src="{% static '' %}{{image}}" height="480" width="640">
<br><br><br><input value="{{res}}" class="btn btn-info">
<div class="card  shadow">
    {{remi}}
</div>
</center>

{% endif %}
{% endblock %}


from django.contrib import admin
from .models import Information

admin.site.register(Information)

# Register your models here.



from django.apps import AppConfig

class VisionConfig(AppConfig):
    name = 'vision'



from math import sqrt
from sklearn.cluster import KMeans
from sklearn.neighbors import NearestNeighbors
import numpy as np
from skimage import data, io, feature
from sklearn.utils import shuffle
from skimage.util import invert
from skimage.feature import blob_dog, blob_log, blob_doh
from skimage.color import rgb2gray
import os
import matplotlib.pyplot as plt
import pandas as pd
import pickle
from sklearn.utils import shuffle
from joblib import dump, load
import os

path = os.getcwd()#+"/vision"
dia_list = os.listdir(path+"/dia")[1:26]
nrm_list = os.listdir(path+"/norm")  # [0:1]

def clu(image, n):
   n_colors = n

   # Load the Summer Palace photo
   china = image

   # Convert to floats instead of the default 8 bits integer coding. Dividing by
   # 255 is important so that plt.imshow behaves works well on float data (need to
   # be in the range [0-1])
   china = np.array(china, dtype=np.float64) / 255

   # Load Image and transform to a 2D numpy array.
   w, h, d = tuple(china.shape)
   assert d == 3
   image_array = np.reshape(china, (w * h, d))

   image_array_sample = shuffle(image_array, random_state=0)[:1000]
   kmeans = KMeans(n_clusters=n_colors, random_state=0).fit(image_array_sample)

   # labels = kmeans.predict(image_array)

   # print(labels)
   return (kmeans.cluster_centers_)
   return recreate_image(kmeans.cluster_centers_, labels, w, h)

def recreate_image(codebook, labels, w, h):
   """Recreate the (compressed) image from the code book & labels"""
   d = codebook.shape[1]
   image = np.zeros((w, h, d))
   label_idx = 0
   for i in range(w):
      for j in range(h):
         image[i][j] = codebook[labels[label_idx]]
         label_idx += 1
   return image

def classi(x, y):
   n_neighbors = 15
   clf = NearestNeighbors(n_neighbors)
   clf.fit(x, y)

   Z = clf.predict()

def process():
   v0, v1, v2, v3, v4, v5, v6, v7, v8 = [], [], [], [], [], [], [], [], []
   name = []

   df = pd.DataFrame(
      {"name": name, "v0": v0, "v1": v1, "v2": v2, "v3": v3, "v4": v4, "v5": v5, "v6": v6, "v7": v7, "v8": v8, })

   matrix = [[], []]

   for img in dia_list:
      try:
         image = io.imread("dia/" + img)
         h, w = image.shape[:-1]
         image = image[int((h // 4) * 3):, int(w // 2):int((w // 4) * 3)]
         result = rgb2gray(clu(image, 9))
         # plt.imsave("eye_dia/"+img,result)
         matrix[0].append(result.flatten())
         print(result.max() * 255)

      except Exception as e:
         print(e)
   print("...........................................")
   for img in nrm_list:
      try:
         image = io.imread("norm/" + img)
         h, w = image.shape[:-1]
         image = image[int((h // 4) * 3):, int(w // 2):int((w // 4) * 3)]
         result = rgb2gray(clu(image, 9))
         # plt.imsave("eye_norm/"+img,result)
         matrix[1].append(result.flatten())
         print(result.max() * 255)
      except:
         pass

   # file  = open("base.pickle","wb")

   # pickle.dump(matrix,file)

   dia_mat = matrix[0]
   diaY = []
   nrmY = []
   for i in range(len(dia_mat)):
      diaY.append(1)

   nrm_mat = matrix[1]
   for i in range(len(nrm_mat)):
      nrmY.append(0)
   '''mat_diaY = np.array(diaY)
   mat_nrmX = np.array(nrmY) '''
   lablesY = diaY + nrmY
   dataX = dia_mat + nrm_mat
   x, y = shuffle(dataX, lablesY, random_state=0)

   model = NearestNeighbors(5)

   from sklearn.neighbors.nearest_centroid import NearestCentroid

   clf = NearestCentroid()
   clf.fit(np.array(x), np.array(y))
   dump(clf, 'model.joblib')

   #clf2.predict()
   # NearestCentroid(metric='euclidean', shrink_threshold=None)
   for n, k in enumerate(x):
      print(np.mean(lablesY[n] == clf.predict([k])))

def result(image):
   path = os.getcwd()+"\\vision\\"
   h, w = image.shape[:-1]
   image = image[int((h // 4) * 3):, int(w // 2):int((w // 4) * 3)]
   result1 = rgb2gray(clu(image, 9))
   # plt.imsave("eye_dia/"+img,result)
   k = result1.flatten()

   clf = load(path+"model.joblib")
   return clf.predict([k])

if __name__ =="__main__":

   process()



from django.db import models

class Information(models.Model):

    username = models.CharField(max_length=30)
    age = models.CharField(max_length=30)
    email = models.CharField(max_length=30)
    gender = models.CharField(max_length=30)
    phone = models.CharField(max_length=30)
    age = models.CharField(max_length=30)
    address = models.CharField(max_length=70)
    test = models.CharField(max_length=30)
    pid = models.CharField(max_length=30)
    result = models.CharField(max_length=30,default = "")

    def __str__(self):
        return self.username

# Create your models here.l



from django.test import TestCase

# Create your tests here.


"""eyetest URL Configuration

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/3.0/topics/http/urls/
Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  path('', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.urls import include, path
    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))
"""
from django.contrib import admin
from django.urls import path
from . views import *

urlpatterns = [
    path('',index,name="index" ),
    path('upload',upload,name="upload" ),
    path('disease',disease,name="entry" ),
]



from django.shortcuts import render,redirect
from django.http import HttpResponse
from skimage import  io
from . models import *
from datetime import date
import os
import numpy as np
from tensorflow.keras.models import load_model
from tensorflow.keras.preprocessing import image
import cv2
from django.core.files.storage import FileSystemStorage

model = load_model('model.h5')
def preprocess_image(image_path):

    img = image.load_img(image_path, target_size=(48, 48))
    img_array = image.img_to_array(img)
    img_array = np.expand_dims(img_array, axis=0)
    return img_array

def predict(input_data):

    predictions = model.predict(input_data)
    return predictions
def index(request):
    return render(request,"index.html")

def disease(request):
    return render(request,"disease.html")

def entry(request):

    if request.method == "POST":
        username = request.POST["username"]
        age = request.POST["age"]
        email = request.POST["email"]
        address = request.POST["address"]
        test = request.POST["test"]
        gender = request.POST["gender"]
        pid = request.POST["id"]
        phone = request.POST["phone"]

        info = Information(username = username,age = age,email=email,address=address,pid=pid,gender=gender,phone=phone,test = test)
        info.save()
        return redirect('upload')
    db = Information.objects.all()
    print(db)
    return render(request,"new_entry.html")

def upload(request):
    today = date.today()
    date_str = today.strftime("%d-%m-%Y")
    db = Information.objects.all()
    if request.method=="POST":
        image = request.FILES["file"]
        image_name = request.FILES["file"].name
      
        fs = FileSystemStorage(os.getcwd() + "/vision/static")

        fs.delete("temp.jpg")
        fs.delete("temp.jpg")
        print(fs.location)
        fs.save("temp.jpg", image)
        img = cv2.imread(os.getcwd() + "/vision/static/temp.jpg")
        print(fs.location)
      
        print(fs.location+'/'+image_name[:-4]+"_"+date_str+image_name[-4:],"file name")
        cv2.imwrite(fs.location+'/'+image_name[:-4]+"_"+date_str+image_name[-4:],img)
        #fs.save(image_name, image)
        thi = "-"
        dia = "-"
        print(fs.location +"/"+"temp.jpg")
        input_data = preprocess_image(str(fs.location)+"/"+"temp.jpg")
        predictions = predict(input_data)
        label_index = np.argmax(predictions)
        rem = [
            "for first one", "for second one"
        ]
        lables = ['Apple___Apple_scab', 'Apple___Black_rot', 'Apple___Cedar_apple_rust',
                    'Apple___healthy', 'Potato___Early_blight', 'Potato___Late_blight', 
                    'Potato___healthy', 'Peach___Bacterial_spot', 'Peach___healthy', 
                    'Strawberry___Leaf_scorch', 'Strawberry___healthy']
        return render(request, "upload.html", {"image":"temp.jpg","res":lables[label_index],"remi":rem[label_index]})

    return render(request,"upload.html",{'data':db})

# Create your views here.



from math import sqrt
from sklearn.cluster import KMeans
from sklearn.neighbors import NearestNeighbors
import numpy as np
from skimage import data, io, feature
from sklearn.utils import shuffle
from skimage.util import invert
from skimage.feature import blob_dog, blob_log, blob_doh
from skimage.color import rgb2gray
import os
import matplotlib.pyplot as plt
import pandas as pd
import pickle
from sklearn.utils import shuffle
from joblib import dump, load
import os



def clu(image,n):
   n_colors = n

   # Load the Summer Palace photo
   china = image

   # Convert to floats instead of the default 8 bits integer coding. Dividing by
   # 255 is important so that plt.imshow behaves works well on float data (need to
   # be in the range [0-1])
   china = np.array(china, dtype=np.float64) / 255

   # Load Image and transform to a 2D numpy array.
   w, h, d = tuple(china.shape)
   assert d == 3
   image_array = np.reshape(china, (w * h, d))

   image_array_sample = shuffle(image_array, random_state=0)[:1000]
   kmeans = KMeans(n_clusters=n_colors, random_state=0).fit(image_array_sample)

   # labels = kmeans.predict(image_array)

   # print(labels)
   return (kmeans.cluster_centers_)
   return recreate_image(kmeans.cluster_centers_, labels, w, h)

def recreate_image(codebook, labels, w, h):
   """Recreate the (compressed) image from the code book & labels"""
   d = codebook.shape[1]
   image = np.zeros((w, h, d))
   label_idx = 0
   for i in range(w):
      for j in range(h):
         image[i][j] = codebook[labels[label_idx]]
         label_idx += 1
   return image

def classi(x, y):
   n_neighbors = 15
   clf = NearestNeighbors(n_neighbors)
   clf.fit(x, y)

   Z = clf.predict()

def process():
   v0, v1, v2, v3, v4, v5, v6, v7, v8 = [], [], [], [], [], [], [], [], []
   name = []

   df = pd.DataFrame(
      {"name": name, "v0": v0, "v1": v1, "v2": v2, "v3": v3, "v4": v4, "v5": v5, "v6": v6, "v7": v7, "v8": v8, })

   matrix = [[], []]

   for img in dia_list:
      try:
         image = io.imread("dia/" + img)
         h, w = image.shape[:-1]
         image = image[int((h // 4) * 3):, int(w // 2):int((w // 4) * 3)]
         result = rgb2gray(clu(image, 9))
         # plt.imsave("eye_dia/"+img,result)
         matrix[0].append(result.flatten())
         print(result.max() * 255)

      except Exception as e:
         print(e)
   print("...........................................")
   for img in nrm_list:
      try:
         image = io.imread("norm/" + img)
         h, w = image.shape[:-1]
         image = image[int((h // 4) * 3):, int(w // 2):int((w // 4) * 3)]
         result = rgb2gray(clu(image, 9))
         # plt.imsave("eye_norm/"+img,result)
         matrix[1].append(result.flatten())
         print(result.max() * 255)
      except:
         pass

   # file  = open("base.pickle","wb")

   # pickle.dump(matrix,file)

   dia_mat = matrix[0]
   diaY = []
   nrmY = []
   for i in range(len(dia_mat)):
      diaY.append(1)

   nrm_mat = matrix[1]
   for i in range(len(nrm_mat)):
      nrmY.append(0)
   '''mat_diaY = np.array(diaY)
   mat_nrmX = np.array(nrmY) '''
   lablesY = diaY + nrmY
   dataX = dia_mat + nrm_mat
   x, y = shuffle(dataX, lablesY, random_state=0)

   model = NearestNeighbors(5)

   from sklearn.neighbors.nearest_centroid import NearestCentroid

   clf = NearestCentroid()
   clf.fit(np.array(x), np.array(y))
   dump(clf, 'model.joblib')

   #clf2.predict()
   # NearestCentroid(metric='euclidean', shrink_threshold=None)
   for n, k in enumerate(x):
      print(np.mean(lablesY[n] == clf.predict([k])))

def result(image):
   path = os.getcwd()+"/vision/"
   h, w = image.shape[:-1]
   image = image[int((h // 4) * 3):, int(w // 2):int((w // 4) * 3)]
   result1 = rgb2gray(clu(image, 9))
   # plt.imsave("eye_dia/"+img,result)
   k = result1.flatten()

   clf = load(path+"model.joblib")
   return clf.predict([k])

def t_result(image):
   path = os.getcwd()+"/vision/"
   h, w = image.shape[:-1]
   image = image[int((h // 4) * 3):, int(w // 2):int((w // 4) * 3)]
   result1 = rgb2gray(clu(image, 9))
   # plt.imsave("eye_dia/"+img,result)
   k = result1.flatten()
   clf = load(path+"model.joblib")
   return clf.predict([k])

if __name__ =="__main__":
   process()


<?xml version="1.0" encoding="UTF-8"?>
<module type="PYTHON_MODULE" version="4">
  <component name="NewModuleRootManager">
    <content url="file://$MODULE_DIR$" />
    <orderEntry type="jdk" jdkName="Python 3.6" jdkType="Python SDK" />
    <orderEntry type="sourceFolder" forTests="false" />
  </component>
</module>


<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="ProjectRootManager" version="2" project-jdk-name="Python 3.6" project-jdk-type="Python SDK" />
  <component name="PyCharmProfessionalAdvertiser">
    <option name="shown" value="true" />
  </component>
</project>


<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="ProjectModuleManager">
    <modules>
      <module fileurl="file://$PROJECT_DIR$/.idea/eyetest.iml" filepath="$PROJECT_DIR$/.idea/eyetest.iml" />
    </modules>
  </component>
</project>


<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="ChangeListManager">
    <list default="true" id="b76e06e4-00d8-4e9c-a409-898b36c6ae10" name="Default Changelist" comment="" />
    <option name="EXCLUDED_CONVERTED_TO_IGNORED" value="true" />
    <option name="TRACKING_ENABLED" value="true" />
    <option name="SHOW_DIALOG" value="false" />
    <option name="HIGHLIGHT_CONFLICTS" value="true" />
    <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
    <option name="LAST_RESOLUTION" value="IGNORE" />
  </component>
  <component name="FileEditorManager">
    <leaf SIDE_TABS_SIZE_LIMIT_KEY="300">
      <file leaf-file-name="views.py" pinned="false" current-in-tab="false">
        <entry file="file://$PROJECT_DIR$/vision/views.py">
          <provider selected="true" editor-type-id="text-editor">
            <state relative-caret-position="158">
              <caret line="69" column="0" lean-forward="false" selection-start-line="69" selection-start-column="0" selection-end-line="69" selection-end-column="0" />
              <folding>
                <element signature="e#0#44#0" expanded="true" />
              </folding>
            </state>
          </provider>
        </entry>
      </file>
      <file leaf-file-name="models.py" pinned="false" current-in-tab="false">
        <entry file="file://$PROJECT_DIR$/vision/models.py">
          <provider selected="true" editor-type-id="text-editor">
            <state relative-caret-position="0">
              <caret line="0" column="0" lean-forward="false" selection-start-line="0" selection-start-column="0" selection-end-line="0" selection-end-column="0" />
              <folding />
            </state>
          </provider>
        </entry>
      </file>
      <file leaf-file-name="vision.py" pinned="false" current-in-tab="true">
        <entry file="file://$PROJECT_DIR$/vision/vision.py">
          <provider selected="true" editor-type-id="text-editor">
            <state relative-caret-position="238">
              <caret line="155" column="25" lean-forward="false" selection-start-line="155" selection-start-column="25" selection-end-line="155" selection-end-column="25" />
              <folding>
                <element signature="e#0#21#0" expanded="true" />
              </folding>
            </state>
          </provider>
        </entry>
      </file>
      <file leaf-file-name="urls.py" pinned="false" current-in-tab="false">
        <entry file="file://$PROJECT_DIR$/vision/urls.py">
          <provider selected="true" editor-type-id="text-editor">
            <state relative-caret-position="380">
              <caret line="21" column="16" lean-forward="false" selection-start-line="21" selection-start-column="10" selection-end-line="21" selection-end-column="16" />
              <folding />
            </state>
          </provider>
        </entry>
      </file>
      <file leaf-file-name="upload.html" pinned="false" current-in-tab="false">
        <entry file="file://$PROJECT_DIR$/vision/templates/upload.html">
          <provider selected="true" editor-type-id="text-editor">
            <state relative-caret-position="204">
              <caret line="27" column="0" lean-forward="false" selection-start-line="27" selection-start-column="0" selection-end-line="27" selection-end-column="0" />
              <folding />
            </state>
          </provider>
        </entry>
      </file>
      <file leaf-file-name="new_entry.html" pinned="false" current-in-tab="false">
        <entry file="file://$PROJECT_DIR$/vision/templates/new_entry.html">
          <provider selected="true" editor-type-id="text-editor">
            <state relative-caret-position="167">
              <caret line="105" column="8" lean-forward="false" selection-start-line="105" selection-start-column="8" selection-end-line="106" selection-end-column="32" />
              <folding />
            </state>
          </provider>
        </entry>
      </file>
      <file leaf-file-name="index.html" pinned="false" current-in-tab="false">
        <entry file="file://$PROJECT_DIR$/vision/templates/index.html">
          <provider selected="true" editor-type-id="text-editor">
            <state relative-caret-position="880">
              <caret line="44" column="28" lean-forward="false" selection-start-line="44" selection-start-column="28" selection-end-line="44" selection-end-column="28" />
              <folding />
            </state>
          </provider>
        </entry>
      </file>
    </leaf>
  </component>
  <component name="IdeDocumentHistory">
    <option name="CHANGED_PATHS">
      <list>
        <option value="$PROJECT_DIR$/vision/templates/index.html" />
        <option value="$PROJECT_DIR$/vision/templates/new_entry.html" />
        <option value="$PROJECT_DIR$/vision/templates/upload.html" />
        <option value="$PROJECT_DIR$/vision/views.py" />
        <option value="$PROJECT_DIR$/vision/vision.py" />
      </list>
    </option>
  </component>
  <component name="ProjectFrameBounds" extendedState="6">
    <option name="x" value="1" />
    <option name="y" value="111" />
    <option name="width" value="1346" />
    <option name="height" value="688" />
  </component>
  <component name="ProjectId" id="1WORkxB3zr8HMHdalrNycIe9JDv" />
  <component name="ProjectView">
    <navigator currentView="ProjectPane" proportions="" version="1">
      <flattenPackages />
      <showMembers />
      <showModules />
      <showLibraryContents />
      <hideEmptyPackages />
      <abbreviatePackageNames />
      <autoscrollToSource />
      <autoscrollFromSource />
      <sortByType />
      <manualOrder />
      <foldersAlwaysOnTop value="true" />
    </navigator>
    <panes>
      <pane id="Scratches" />
      <pane id="Scope" />
      <pane id="ProjectPane">
        <subPane>
          <expand>
            <path>
              <item name="eyetest" type="b2602c69:ProjectViewProjectNode" />
              <item name="eyetest" type="462c0819:PsiDirectoryNode" />
            </path>
            <path>
              <item name="eyetest" type="b2602c69:ProjectViewProjectNode" />
              <item name="eyetest" type="462c0819:PsiDirectoryNode" />
              <item name="vision" type="462c0819:PsiDirectoryNode" />
            </path>
            <path>
              <item name="eyetest" type="b2602c69:ProjectViewProjectNode" />
              <item name="eyetest" type="462c0819:PsiDirectoryNode" />
              <item name="vision" type="462c0819:PsiDirectoryNode" />
              <item name="templates" type="462c0819:PsiDirectoryNode" />
            </path>
          </expand>
          <select />
        </subPane>
      </pane>
    </panes>
  </component>
  <component name="ProjectViewState">
    <option name="hideEmptyMiddlePackages" value="true" />
    <option name="showExcludedFiles" value="true" />
    <option name="showLibraryContents" value="true" />
  </component>
  <component name="PropertiesComponent">
    <property name="RunOnceActivity.ShowReadmeOnStart" value="true" />
    <property name="last_opened_file_path" value="$PROJECT_DIR$" />
    <property name="settings.editor.selected.configurable" value="com.jetbrains.python.configuration.PyActiveSdkModuleConfigurable" />
  </component>
  <component name="RecentsManager">
    <key name="CopyFile.RECENT_KEYS">
      <recent name="$PROJECT_DIR$/vision/templates" />
      <recent name="D:\eyetest\vision" />
    </key>
    <key name="MoveFile.RECENT_KEYS">
      <recent name="$PROJECT_DIR$/vision" />
    </key>
  </component>
  <component name="RunDashboard">
    <option name="ruleStates">
      <list>
        <RuleState>
          <option name="name" value="ConfigurationTypeDashboardGroupingRule" />
        </RuleState>
        <RuleState>
          <option name="name" value="StatusDashboardGroupingRule" />
        </RuleState>
      </list>
    </option>
  </component>
  <component name="RunManager">
    <configuration name="vision" type="PythonConfigurationType" factoryName="Python" temporary="true">
      <option name="INTERPRETER_OPTIONS" value="" />
      <option name="PARENT_ENVS" value="true" />
      <envs>
        <env name="PYTHONUNBUFFERED" value="1" />
      </envs>
      <option name="SDK_HOME" value="" />
      <option name="WORKING_DIRECTORY" value="$PROJECT_DIR$/vision" />
      <option name="IS_MODULE_SDK" value="true" />
      <option name="ADD_CONTENT_ROOTS" value="true" />
      <option name="ADD_SOURCE_ROOTS" value="true" />
      <module name="eyetest" />
      <option name="SCRIPT_NAME" value="$PROJECT_DIR$/vision/vision.py" />
      <option name="PARAMETERS" value="" />
      <option name="SHOW_COMMAND_LINE" value="false" />
      <option name="EMULATE_TERMINAL" value="false" />
      <option name="MODULE_MODE" value="false" />
    </configuration>
    <recent_temporary>
      <list size="1">
        <item index="0" class="java.lang.String" itemvalue="Python.vision" />
      </list>
    </recent_temporary>
  </component>
  <component name="ServiceViewManager">
    <option name="viewStates">
      <list>
        <serviceView>
          <treeState>
            <expand />
            <select />
          </treeState>
        </serviceView>
      </list>
    </option>
  </component>
  <component name="ShelveChangesManager" show_recycled="false">
    <option name="remove_strategy" value="false" />
  </component>
  <component name="SvnConfiguration">
    <configuration />
  </component>
  <component name="TaskManager">
    <task active="true" id="Default" summary="Default task">
      <changelist id="b76e06e4-00d8-4e9c-a409-898b36c6ae10" name="Default Changelist" comment="" />
      <created>1578994281992</created>
      <option name="number" value="Default" />
      <option name="presentableId" value="Default" />
      <updated>1578994281992</updated>
    </task>
    <servers />
  </component>
  <component name="ToolWindowManager">
    <frame x="-8" y="-8" width="1382" height="744" extended-state="6" />
    <layout>
      <window_info id="Project" active="false" anchor="left" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.24255952" sideWeight="0.5" order="0" side_tool="false" content_ui="combo" />
      <window_info id="TODO" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="6" side_tool="false" content_ui="tabs" />
      <window_info id="Event Log" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="7" side_tool="true" content_ui="tabs" />
      <window_info id="Run" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="2" side_tool="false" content_ui="tabs" />
      <window_info id="Version Control" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="false" weight="0.33" sideWeight="0.5" order="10" side_tool="false" content_ui="tabs" />
      <window_info id="Python Console" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="8" side_tool="false" content_ui="tabs" />
      <window_info id="Structure" active="false" anchor="left" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.25" sideWeight="0.5" order="1" side_tool="false" content_ui="tabs" />
      <window_info id="Terminal" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="true" show_stripe_button="true" weight="0.36437908" sideWeight="0.5" order="9" side_tool="false" content_ui="tabs" />
      <window_info id="Debug" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.4" sideWeight="0.5" order="3" side_tool="false" content_ui="tabs" />
      <window_info id="Favorites" active="false" anchor="left" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="2" side_tool="true" content_ui="tabs" />
      <window_info id="Cvs" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.25" sideWeight="0.5" order="4" side_tool="false" content_ui="tabs" />
      <window_info id="Message" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="0" side_tool="false" content_ui="tabs" />
      <window_info id="Commander" active="false" anchor="right" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.4" sideWeight="0.5" order="0" side_tool="false" content_ui="tabs" />
      <window_info id="Inspection" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.4" sideWeight="0.5" order="5" side_tool="false" content_ui="tabs" />
      <window_info id="Hierarchy" active="false" anchor="right" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.25" sideWeight="0.5" order="2" side_tool="false" content_ui="combo" />
      <window_info id="Find" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="1" side_tool="false" content_ui="tabs" />
      <window_info id="Ant Build" active="false" anchor="right" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.25" sideWeight="0.5" order="1" side_tool="false" content_ui="tabs" />
      <window_info id="Data View" active="false" anchor="right" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="3" side_tool="false" content_ui="tabs" />
    </layout>
    <layout-to-restore>
      <window_info id="TODO" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="6" side_tool="false" content_ui="tabs" />
      <window_info id="Cvs" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.25" sideWeight="0.5" order="4" side_tool="false" content_ui="tabs" />
      <window_info id="Message" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="0" side_tool="false" content_ui="tabs" />
      <window_info id="Commander" active="false" anchor="right" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.4" sideWeight="0.5" order="0" side_tool="false" content_ui="tabs" />
      <window_info id="Event Log" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="7" side_tool="true" content_ui="tabs" />
      <window_info id="Inspection" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.4" sideWeight="0.5" order="5" side_tool="false" content_ui="tabs" />
      <window_info id="Run" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="2" side_tool="false" content_ui="tabs" />
      <window_info id="Version Control" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="false" weight="0.33" sideWeight="0.5" order="10" side_tool="false" content_ui="tabs" />
      <window_info id="Python Console" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="8" side_tool="false" content_ui="tabs" />
      <window_info id="Terminal" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="true" show_stripe_button="true" weight="0.36437908" sideWeight="0.5" order="9" side_tool="false" content_ui="tabs" />
      <window_info id="Project" active="false" anchor="left" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.24255952" sideWeight="0.5" order="0" side_tool="false" content_ui="combo" />
      <window_info id="Hierarchy" active="false" anchor="right" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.25" sideWeight="0.5" order="2" side_tool="false" content_ui="combo" />
      <window_info id="Find" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="1" side_tool="false" content_ui="tabs" />
      <window_info id="Structure" active="false" anchor="left" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.25" sideWeight="0.5" order="1" side_tool="false" content_ui="tabs" />
      <window_info id="Ant Build" active="false" anchor="right" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.25" sideWeight="0.5" order="1" side_tool="false" content_ui="tabs" />
      <window_info id="Debug" active="false" anchor="bottom" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.4" sideWeight="0.5" order="3" side_tool="false" content_ui="tabs" />
      <window_info id="Favorites" active="false" anchor="left" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="2" side_tool="true" content_ui="tabs" />
      <window_info id="Data View" active="false" anchor="right" auto_hide="false" internal_type="DOCKED" type="DOCKED" visible="false" show_stripe_button="true" weight="0.33" sideWeight="0.5" order="3" side_tool="false" content_ui="tabs" />
    </layout-to-restore>
  </component>
  <component name="VcsContentAnnotationSettings">
    <option name="myLimit" value="2678400000" />
  </component>
  <component name="WindowStateProjectService">
    <state x="409" y="47" key="#vision" timestamp="1579024412380">
      <screen x="0" y="0" width="1366" height="728" />
    </state>
    <state x="409" y="47" key="#vision/0.0.1366.728@0.0.1366.728" timestamp="1579024412380" />
    <state width="1345" height="229" key="GridCell.Tab.0.bottom" timestamp="1579029198040">
      <screen x="0" y="0" width="1366" height="728" />
    </state>
    <state width="1345" height="229" key="GridCell.Tab.0.bottom/0.0.1366.728@0.0.1366.728" timestamp="1579029198040" />
    <state width="1345" height="229" key="GridCell.Tab.0.center" timestamp="1579029198040">
      <screen x="0" y="0" width="1366" height="728" />
    </state>
    <state width="1345" height="229" key="GridCell.Tab.0.center/0.0.1366.728@0.0.1366.728" timestamp="1579029198040" />
    <state width="1345" height="229" key="GridCell.Tab.0.left" timestamp="1579029198040">
      <screen x="0" y="0" width="1366" height="728" />
    </state>
    <state width="1345" height="229" key="GridCell.Tab.0.left/0.0.1366.728@0.0.1366.728" timestamp="1579029198040" />
    <state width="1345" height="229" key="GridCell.Tab.0.right" timestamp="1579029198040">
      <screen x="0" y="0" width="1366" height="728" />
    </state>
    <state width="1345" height="229" key="GridCell.Tab.0.right/0.0.1366.728@0.0.1366.728" timestamp="1579029198040" />
    <state x="244" y="36" key="SettingsEditor" timestamp="1579094270609">
      <screen x="67" y="27" width="1299" height="741" />
    </state>
    <state x="186" y="9" key="SettingsEditor/0.0.1366.728@0.0.1366.728" timestamp="1579024418548" />
    <state x="244" y="36" key="SettingsEditor/67.27.1299.741@67.27.1299.741" timestamp="1579094270609" />
  </component>
  <component name="XDebuggerManager">
    <breakpoint-manager />
    <watches-manager />
  </component>
  <component name="editorHistoryManager">
    <entry file="file://$PROJECT_DIR$/vision/views.py">
      <provider selected="true" editor-type-id="text-editor">
        <state relative-caret-position="480">
          <caret line="32" column="33" lean-forward="false" selection-start-line="32" selection-start-column="33" selection-end-line="32" selection-end-column="33" />
          <folding>
            <element signature="e#0#44#0" expanded="true" />
          </folding>
        </state>
      </provider>
    </entry>
    <entry file="file://$PROJECT_DIR$/vision/templates/upload.html">
      <provider selected="true" editor-type-id="text-editor">
        <state relative-caret-position="240">
          <caret line="12" column="43" lean-forward="false" selection-start-line="12" selection-start-column="43" selection-end-line="12" selection-end-column="43" />
          <folding />
        </state>
      </provider>
    </entry>
    <entry file="file://$PROJECT_DIR$/vision/urls.py">
      <provider selected="true" editor-type-id="text-editor">
        <state relative-caret-position="380">
          <caret line="21" column="16" lean-forward="false" selection-start-line="21" selection-start-column="10" selection-end-line="21" selection-end-column="16" />
          <folding />
        </state>
      </provider>
    </entry>
    <entry file="file://$PROJECT_DIR$/vision/templates/index.html">
      <provider selected="true" editor-type-id="text-editor">
        <state relative-caret-position="880">
          <caret line="44" column="28" lean-forward="true" selection-start-line="44" selection-start-column="28" selection-end-line="44" selection-end-column="28" />
          <folding />
        </state>
      </provider>
    </entry>
    <entry file="file://$PROJECT_DIR$/vision/templates/new_entry.html">
      <provider selected="true" editor-type-id="text-editor">
        <state relative-caret-position="2120">
          <caret line="106" column="17" lean-forward="false" selection-start-line="106" selection-start-column="17" selection-end-line="106" selection-end-column="17" />
          <folding />
        </state>
      </provider>
    </entry>
    <entry file="file://$PROJECT_DIR$/vision/urls.py">
      <provider selected="true" editor-type-id="text-editor">
        <state relative-caret-position="380">
          <caret line="21" column="16" lean-forward="false" selection-start-line="21" selection-start-column="10" selection-end-line="21" selection-end-column="16" />
          <folding />
        </state>
      </provider>
    </entry>
    <entry file="file://$PROJECT_DIR$/vision/templates/index.html">
      <provider selected="true" editor-type-id="text-editor">
        <state relative-caret-position="880">
          <caret line="44" column="28" lean-forward="false" selection-start-line="44" selection-start-column="28" selection-end-line="44" selection-end-column="28" />
          <folding />
        </state>
      </provider>
    </entry>
    <entry file="file://$PROJECT_DIR$/vision/templates/upload.html">
      <provider selected="true" editor-type-id="text-editor">
        <state relative-caret-position="204">
          <caret line="27" column="0" lean-forward="false" selection-start-line="27" selection-start-column="0" selection-end-line="27" selection-end-column="0" />
          <folding />
        </state>
      </provider>
    </entry>
    <entry file="file://$PROJECT_DIR$/vision/templates/new_entry.html">
      <provider selected="true" editor-type-id="text-editor">
        <state relative-caret-position="167">
          <caret line="105" column="8" lean-forward="false" selection-start-line="105" selection-start-column="8" selection-end-line="106" selection-end-column="32" />
          <folding />
        </state>
      </provider>
    </entry>
    <entry file="file://$PROJECT_DIR$/vision/models.py">
      <provider selected="true" editor-type-id="text-editor">
        <state relative-caret-position="0">
          <caret line="0" column="0" lean-forward="false" selection-start-line="0" selection-start-column="0" selection-end-line="0" selection-end-column="0" />
          <folding />
        </state>
      </provider>
    </entry>
    <entry file="file://$PROJECT_DIR$/vision/views.py">
      <provider selected="true" editor-type-id="text-editor">
        <state relative-caret-position="158">
          <caret line="69" column="0" lean-forward="false" selection-start-line="69" selection-start-column="0" selection-end-line="69" selection-end-column="0" />
          <folding>
            <element signature="e#0#44#0" expanded="true" />
          </folding>
        </state>
      </provider>
    </entry>
    <entry file="file://$PROJECT_DIR$/vision/vision.py">
      <provider selected="true" editor-type-id="text-editor">
        <state relative-caret-position="238">
          <caret line="155" column="25" lean-forward="false" selection-start-line="155" selection-start-column="25" selection-end-line="155" selection-end-column="25" />
          <folding>
            <element signature="e#0#21#0" expanded="true" />
          </folding>
        </state>
      </provider>
    </entry>
  </component>
</project>


"""
ASGI config for eyetest project.

It exposes the ASGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/3.0/howto/deployment/asgi/
"""

import os

from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'eyetest.settings')

application = get_asgi_application()



"""
Django settings for eyetest project.

Generated by 'django-admin startproject' using Django 3.0.2.

For more information on this file, see
https://docs.djangoproject.com/en/3.0/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/3.0/ref/settings/
"""

import os

# Build paths inside the project like this: os.path.join(BASE_DIR, ...)
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/3.0/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = '3irezr*s!rqmbc!ust$u7c%wzn05l+gn$xhn&dmv5pvz*z8u)c'

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = True

ALLOWED_HOSTS = []

# Application definition

INSTALLED_APPS = [
    'vision',
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
]
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'eyetest.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'eyetest.wsgi.application'

# Database
# https://docs.djangoproject.com/en/3.0/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
    }
}

# Password validation
# https://docs.djangoproject.com/en/3.0/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]

# Internationalization
# https://docs.djangoproject.com/en/3.0/topics/i18n/

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'UTC'

USE_I18N = True

USE_L10N = True

USE_TZ = True

# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/3.0/howto/static-files/
MEDIA_URL = os.path.join(BASE_DIR,'/vision/media/')
MEDIA_ROOT = os.path.join(BASE_DIR,'/vision/static/')

STATIC_URL = '/static/'



"""
Django settings for eyetest project.

Generated by 'django-admin startproject' using Django 3.0.2.

For more information on this file, see
https://docs.djangoproject.com/en/3.0/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/3.0/ref/settings/
"""

import os

# Build paths inside the project like this: os.path.join(BASE_DIR, ...)
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/3.0/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = '3irezr*s!rqmbc!ust$u7c%wzn05l+gn$xhn&dmv5pvz*z8u)c'

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = True

ALLOWED_HOSTS = []

# Application definition

INSTALLED_APPS = [
    'vision',
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'eyetest.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'eyetest.wsgi.application'

# Database
# https://docs.djangoproject.com/en/3.0/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
    }
}

# Password validation
# https://docs.djangoproject.com/en/3.0/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]

# Internationalization
# https://docs.djangoproject.com/en/3.0/topics/i18n/

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'UTC'

USE_I18N = True

USE_L10N = True

USE_TZ = True

# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/3.0/howto/static-files/
MEDIA_URL = os.path.join(BASE_DIR,'/vision/media/')
MEDIA_ROOT = os.path.join(BASE_DIR,'/vision/static/')

STATIC_URL = '/static/'



"""
WSGI config for eyetest project.

It exposes the WSGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/3.0/howto/deployment/wsgi/
"""

import os

from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'eyetest.settings')

application = get_wsgi_application()


